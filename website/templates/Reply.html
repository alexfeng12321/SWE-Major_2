{% extends 'template.html' %} {% block content %}
<link rel="stylesheet" href="static/css/reply.css" media="screen" />
<section class="u-clearfix u-section-1" id="block-6">
  <div class="u-clearfix u-sheet u-sheet-1">
    <!-- Question Block -->
    <div class="u-container-style u-expanded-width u-group u-white u-group-1">
      <div class="u-container-layout u-container-layout-1">
        <h4 class="u-align-center u-text u-text-default u-text-1">
          {{ post.question[:100] }}...
        </h4>
        <p class="u-align-left u-text u-text-2">
          Asked on {{ post.time_asked.strftime('%Y-%m-%d %H:%M') }}
          &nbsp;&nbsp;&nbsp; By {{ post.user.userName }}
        </p>
        <p class="u-align-left u-text u-text-3">{{ post.question }}</p>
        <div
          class="u-border-3 u-border-grey-25 u-line u-line-horizontal u-line-1"
        ></div>
      </div>
    </div>

    <!-- Replies Section -->
    <div class="u-container-style u-expanded-width u-group u-white u-group-2">
      <div class="u-container-layout u-container-layout-2">
        <h4 class="u-text u-text-default u-text-4">
          {{ replies|length }} Answer{{ 's' if replies|length != 1 }}
        </h4>

        {% for reply in replies %}
        <div class="custom-expanded u-container-style u-grey-10 u-group">
          <div class="u-container-layout">
            <h5 class="u-text u-text-default">{{ reply.user.userName }}</h5>
            <p class="u-text">{{ reply.content }}</p>
          </div>
        </div>
        {% else %}
        <p>No replies yet.</p>
        {% endfor %}
      </div>
    </div>

    <!-- Reply Form -->
    {% if current_user.is_authenticated %}
    <div class="u-container-style u-expanded-width u-group u-white u-group-3">
      <div class="u-container-layout u-container-layout-5">
        <form
          method="POST"
          action="{{ url_for('views.add_reply', slug=post.slug) }}"
        >
          <textarea
            name="content"
            placeholder="Your reply..."
            required
            style="width: 100%; height: 100px"
          ></textarea>
          <br />
          <button type="submit" class="u-btn u-button-style u-btn-2">
            Submit Reply
          </button>
        </form>
      </div>
    </div>
    {% else %}
    <p><a href="{{ url_for('auth.login') }}">Login</a> to post a reply.</p>
    {% endif %}
  </div>
</section>
{% endblock %}
